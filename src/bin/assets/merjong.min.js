"use strict";(()=>{var l=class{tileDesigns;darkMode;backgroundColor;constructor(){this.tileDesigns={base:"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Front.svg",q:"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Blank.svg",x:"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Back.svg","0m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man5-Dora.svg","1m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man1.svg","2m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man2.svg","3m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man3.svg","4m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man4.svg","5m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man5.svg","6m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man6.svg","7m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man7.svg","8m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man8.svg","9m":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Man9.svg","0p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin5-Dora.svg","1p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin1.svg","2p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin2.svg","3p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin3.svg","4p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin4.svg","5p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin5.svg","6p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin6.svg","7p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin7.svg","8p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin8.svg","9p":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pin9.svg","0s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou5-Dora.svg","1s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou1.svg","2s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou2.svg","3s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou3.svg","4s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou4.svg","5s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou5.svg","6s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou6.svg","7s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou7.svg","8s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou8.svg","9s":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Sou9.svg","1z":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Ton.svg","2z":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Nan.svg","3z":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Shaa.svg","4z":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Pei.svg","5z":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Haku.svg","6z":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Hatsu.svg","7z":"https://raw.githubusercontent.com/FluffyStuff/riichi-mahjong-tiles/26e127ba2117f45cdce5ea0225748cc0cfad3169/Regular/Chun.svg"},this.backgroundColor="green",this.darkMode=!1}},h=()=>new l;var g={default:{getThemeVariables:h}};var p=s=>{let c=[],t=[],a=[];for(let i=0;i<s.length;i++){let e=s[i];if(/[0-9XQ]/.test(e))t.push(e);else if(e==="'"||e==='"'){let n=t.pop();t.push((n||"Q")+e)}else if(/[mpszqx]/.test(e)){if(t.length===0){c.push({type:"tile",tileKey:e==="x"?"x":"q",tileOrient:"upright"});continue}for(let n=0;n<t.length;n++){let f=t[n],r=f[0],o=f.slice(1),u="";e==="x"||e==="q"?u=e:r==="X"||r==="Q"?u=r.toLowerCase():u=`${r}${e}`.toLowerCase(),o?o==="'"?c.push({type:"tile",tileKey:u,tileOrient:"sideways"}):o==="''"?c.push({type:"tile",tileKey:u,tileOrient:"sidewaysTop"}):o==='"'?(c.push({type:"tile",tileKey:u,tileOrient:"sideways"}),c.push({type:"tile",tileKey:u,tileOrient:"sidewaysTop"})):c.push({type:"tile",tileKey:u,tileOrient:"upright"}):c.push({type:"tile",tileKey:u,tileOrient:"upright"})}t.length=0}else e==="-"&&c.push({type:"space"})}return c},b=s=>{let t=g.default.getThemeVariables().tileDesigns,a=36,i=48,e=Math.max(i,a*2+1),n="",f=0;for(let r of s)r.type==="tile"&&r.tileOrient==="upright"?(n+=`<image href="${t.base}" x="${f}" y="${e-i}" width="${a}" height="${i}" /><image href="${t[r.tileKey]}" x="${f}" y="${e-i}" width="${a}" height="${i}" />`,f+=a+1):r.type==="tile"&&r.tileOrient==="sideways"?(n+=`<image href="${t.base}" x="${-e}" y="${f}" width="${a}" height="${i}" transform="rotate(-90)" /><image href="${t[r.tileKey]}" x="${-e}" y="${f}" width="${a}" height="${i}" transform="rotate(-90)" />`,f+=i+1):r.type==="tile"&&r.tileOrient==="sidewaysTop"?n+=`<image href="${t.base}" x="${a-e+1}" y="${f-i}" width="${a}" height="${i}" transform="rotate(-90)" /><image href="${t[r.tileKey]}" x="${a-e+1}" y="${f-i}" width="${a}" height="${i}" transform="rotate(-90)" />`:f+=Math.max(4,a/4);return`<div style="background-color: green; padding: 0.6rem; border-radius: 6px;"><svg width="100%" height="${e}" style="display: block;">${n}</svg></div>`},y=s=>{let c=p(s);return b(c)},d=Object.freeze({render:y});var w=()=>{m.run()};typeof document<"u"&&window.addEventListener("load",w,!1);var S=async({querySelector:s=".merjong",nodes:c}={})=>{let t;if(c)t=c;else if(s)t=document.querySelectorAll(s);else throw new Error("Nodes and querySelector are both undefined");t=document.querySelectorAll(s);for(let a of Array.from(t)){let i=a.innerHTML.trim();a.innerHTML=await d.render(i)}},R=async(s={querySelector:".merjong"})=>{await S(s)},m={run:R},T=m;})();
